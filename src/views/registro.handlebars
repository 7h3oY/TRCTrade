<div class="container-xxl my-5" id="login">
  <div class="row">
    <div class="col-md-6" id="fondo">
      <div class="image-column">
        <img src="/Motos/resources/img/fondo2.jpg" alt="Imagen de fondo">
      </div>
    </div>
    <div class="col-md-6">
      <div class="form-column">
        <h3>Registro</h3>
        <h5>Con tu usuario podras, publicar y pujar por motos!</h5>
        <form class="formulario" action="" id="formRegistro">
          <div class="form-group">
            <label for="email">Nombre:</label>
            <input type="text" class="form-control" id="nombre" placeholder="Ingrese su nombre" required  name="nombre">
          </div>
          <div class="form-group">
            <label for="email">Apellido Paterno:</label>
            <input type="text" class="form-control" id="apellidoP" placeholder="Ingrese su apellido" required  name="apellido_pat">
          </div>
          <div class="form-group">
            <label for="email">Apellido Materno:</label>
            <input type="text" class="form-control" id="apellidoM" placeholder="Ingrese su apellido" required  name="apellido_mat">
          </div>
          <div class="form-group">
            <label for="email">Correo electrónico:</label>
            <input type="email" class="form-control" id="email" placeholder="Ingrese su correo electrónico" required  name="email">
          </div>
          <div class="form-group">
            <label for="email">Username:</label>
            <input type="text" class="form-control" id="username" placeholder="Ingrese username" required  name="unombre">
          </div>
          <div class="form-group">
            <label for="password">Contrasena:</label>
            <input type="password" class="form-control" id="password" placeholder="Ingrese su contrasena" required name="password">
          </div>
          <button type="submit" class="btn btn-primary">Registrarse</button>
          <hr>
        </form>
      </div>
    </div>
  </div>
</div>

<script>
    let formRegistro = document.getElementById("formRegistro");
    formRegistro.addEventListener("submit", async (event) => {
            event.preventDefault();
        let nombre = document.getElementById("nombre").value;
        let apellido_pat = document.getElementById("apellidoP").value;
        let apellido_mat = document.getElementById("apellidoM").value;
        let email = document.getElementById("email").value;
        let unombre = document.getElementById("username").value;
        let password = document.getElementById("password").value;
        let bodyData = {
            nombre: nombre,
            apellido_pat: apellido_pat,
            apellido_mat: apellido_mat,
            email: email,
            unombre: unombre,
            password: password
        };
        let response = await fetch("/Motos/Post/registro", {
            method: "POST",
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify(bodyData)
        })
        let result = await response.json();
        if(response.ok){
            localStorage.setItem("token", result.token);
            localStorage.setItem("usuario", JSON.stringify(result.usuario))
            alert("Usuario registrado con exito");
            location.href = "/Motos/login"

        }else{
            alert("Ocurrio un error en el registro");
        }
    })

</script>

  

<style>
    @font-face {
        font-family: Captures;
        src: url('/Motos/resources/fonts/Captures.ttf');
    }
    #login{
        box-shadow: 5px 5px 15px gray;
    }
.image-column {
  display: flex;
  align-items: center;
  justify-content: center;
  height: 100%;
}
h3{
    
}
.image-column img {
  max-width: 100%;
}
.form-column {
    margin-top: 10%;
    padding: 20px;
}
.form-column h5{
    font-family: 'Barlow', sans-serif;
}
.form-column h3{
    font-family: 'Captures', sans-serif;
}
.formulario{
    margin-top: 5%;
}
.container {
  max-width: 50%; 
  margin: auto; 
  top: 10%;
}
.btn {
    margin-top: 3%;
}
.btn-primary{
        background-color: #29aeab;
    color: white;
    border: 1px solid black;
}
.btn-primary:hover{
    background-color: transparent;
    color: #29aeab;
    border: 1px solid #29aeab;
}

</style>